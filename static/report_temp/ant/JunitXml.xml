<?xml version="1.0" encoding="utf-8"?><testsuites><testsuite name="pytest" errors="0" failures="1" skipped="0" tests="1" time="0.175" timestamp="2021-11-03T15:58:04.519295" hostname="DESKTOP-S2LA16V"><testcase classname="testsuite.test_KMS.TestCase_KMS" name="test_register_api[param0-\u6709\u6548\u7528\u6237\u540d-expect0]" file="testsuite\test_KMS.py" line="16" tester="zhangwenke" time="0.018"><properties><property name="outcome" value="NBPLUS" /></properties><failure message="AssertionError: assert 404 == {'code': 200}&#10;  +404&#10;  -{'code': 200}">self = &lt;testsuite.test_KMS.TestCase_KMS object at 0x000001E9E2F27F40&gt;
param = {'name': 'root'}, desc = '有效用户名', expect = {'code': 200}
json_template = &lt;function json_template.&lt;locals&gt;.read_template_by_test_name at 0x000001E9E2F2AEF0&gt;

    @pytest.mark.parametrize("param,desc,expect", [[{'name': 'root'}, '有效用户名', {'code': 200}]])
    @allure.story("Case:用户注册KMS")
    @allure.severity("critical")
    def test_register_api(self,param,desc,expect,json_template):
        """None"""
        with allure.step("step:生成测试数据"):
            case = json_template(**param)
            allure.attach(json.dumps(case,indent=4,ensure_ascii=False),"配置信息",allure.attachment_type.JSON)
        with allure.step("step:函数调用"):
            data_ = case.get('data')
            data = format_object.format_(data_)
            allure.attach(json.dumps(data,indent=4,ensure_ascii=False),"请求入参",allure.attachment_type.JSON)
        with allure.step(f"step:请求url: {case.get('url')}"):
            if case.get('method').lower()=='post':
                res = requests.post(url=case.get('url'),headers=case.get('headers'), data=data)
            else:
                res = requests.get(url=case.get('url'),headers=case.get('headers'), params=data)
        with allure.step("step:请求断言"):
&gt;           assert res.status_code == expect
E           AssertionError: assert 404 == {'code': 200}
E             +404
E             -{'code': 200}

test_KMS.py:35: AssertionError</failure></testcase></testsuite></testsuites>